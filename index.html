<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Message Sender (Firebase)</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }

    form {
      margin-bottom: 20px;
    }

    label img {
      width: 20px;
      height: 20px;
      vertical-align: middle;
    }
  </style>
</head>
<body>

  <h2>Send a Message</h2>
  <form id="messageForm">
    <label>
      Sender:
      <input type="text" id="sender" required>
    </label>
    <br><br>

    <label>
      <input type="checkbox" id="robloxCheck">
      <img src="roblox.png" alt="Roblox Check"> <!-- replace with your image -->
    </label>
    <br><br>

    <label>
      Message:
      <input type="text" id="message" required>
    </label>
    <br><br>

    <button type="submit">Send</button>
  </form>

  <!-- Firebase SDK -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
    import { getDatabase, push, ref } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyAjeXycCBhYoAU-0iiC4LbSTylKrrThN8Y",
      authDomain: "sharplabubu.firebaseapp.com",
      databaseURL: "https://sharplabubu-default-rtdb.firebaseio.com",
      projectId: "sharplabubu",
      storageBucket: "sharplabubu.firebasestorage.app",
      messagingSenderId: "596148393481",
      appId: "1:596148393481:web:4f822d86c44a13bd810ad8",
      measurementId: "G-4M25R3BF08"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    const form = document.getElementById("messageForm");
    const senderInput = document.getElementById("sender");

    // Load saved sender from localStorage
    senderInput.value = localStorage.getItem("savedSender") || "";

    form.addEventListener("submit", (e) => {
      e.preventDefault();

      const sender = senderInput.value;
      const message = document.getElementById("message").value;
      const robloxCheck = document.getElementById("robloxCheck").checked;

      const msgData = {
        sender: sender,
        message: message,
        roblox: robloxCheck,
        timestamp: Date.now()
      };

      // Save sender in localStorage so it stays
      localStorage.setItem("savedSender", sender);

      // Send to Firebase
      push(ref(db, "messages"), msgData);

      form.reset();
      senderInput.value = sender; // keep sender filled in
    });
  </script>
</body>
</html>
