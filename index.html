<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Message Sender (Firebase)</title>
  <style>
    body{ font-family:Arial, sans-serif; margin:20px; }
    form{ display:grid; gap:12px; max-width:420px; }
    label img{ width:20px; height:20px; vertical-align:middle; }
    input[type="text"]{ padding:8px; font-size:16px; }
    button{ padding:10px 14px; font-size:16px; cursor:pointer; }
  </style>
</head>
<body>

  <h2>Send a Message</h2>

  <form id="messageForm">
    <label>
      Sender:
      <input type="text" id="sender" required>
    </label>

    <label>
      <input type="checkbox" id="robloxCheck">
      <img src="roblox-check.png" alt="Roblox Check"> <!-- replace with your image -->
      Show my Roblox check photo
    </label>

    <label>
      Message:
      <input type="text" id="message" required placeholder="Type your message">
    </label>

    <button type="submit">Send</button>
  </form>

  <!-- Firebase Compat SDKs -->
  <script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-database-compat.js"></script>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyAjeXycCBhYoAU-0iiC4LbSTylKrrThN8Y",
      authDomain: "sharplabubu.firebaseapp.com",
      databaseURL: "https://sharplabubu-default-rtdb.firebaseio.com",
      projectId: "sharplabubu",
      storageBucket: "sharplabubu.firebasestorage.app",
      messagingSenderId: "596148393481",
      appId: "1:596148393481:web:4f822d86c44a13bd810ad8",
      measurementId: "G-4M25R3BF08"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    const form = document.getElementById('messageForm');
    const senderInput = document.getElementById('sender');
    const messageInput = document.getElementById('message');
    const robloxCheck = document.getElementById('robloxCheck');

    // Keep your sender between sends
    senderInput.value = localStorage.getItem('savedSender') || '';

    form.addEventListener('submit', (e)=>{
      e.preventDefault();

      const sender = senderInput.value.trim();
      const message = messageInput.value.trim();
      const roblox = robloxCheck.checked;

      if (!sender || !message) return;

      const payload = {
        sender,
        message,
        roblox,
        timestamp: Date.now()
      };

      // Save sender for next time
      localStorage.setItem('savedSender', sender);

      // Push to Firebase
      db.ref('messages').push(payload)
        .then(()=>{
          // Clear only the message + checkbox; keep sender
          messageInput.value = '';
          // keep checkbox as-is or reset it â€” choose one:
          // robloxCheck.checked = false;
        })
        .catch(err=>{
          console.error('Send failed:', err);
          alert('Failed to send. See console for details.');
        });
    });
  </script>
</body>
</html>
